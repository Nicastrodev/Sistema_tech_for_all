<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aulas - Tech For All</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header">
      <div class="header-container">
        <div class="brand">
          <div class="logo">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <path
                d="M16 2L28 9V23L16 30L4 23V9L16 2Z"
                fill="white"
                opacity="0.2"
              />
              <path
                d="M16 8L22 11.5V18.5L16 22L10 18.5V11.5L16 8Z"
                fill="white"
              />
            </svg>
          </div>
          <div class="brand-text">
            <h1>Tech For All</h1>
            <p>Inclusão Digital com Segurança</p>
          </div>
        </div>
        <div class="header-actions">
          <div class="role-badge">Aluno</div>
          <button class="btn-secondary" onclick="logout()">Sair</button>
        </div>
      </div>
    </header>

    <main class="main-container">
      <section class="screen">
        <div class="form-container">
          <div class="card">
            <div class="card-header">
              <h3>Aulas e Materiais</h3>
              <p>Acesse os materiais das aulas</p>
            </div>

            <div id="lessonList" class="lesson-list">
              <p style="text-align: center; color: gray; width: 100%">
                Nenhum material disponível no momento.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>
        &copy; 2025 Tech For All - Inclusão Digital com Segurança | Protótipo
        Acadêmico
      </p>
    </footer>

    <script src="/common.js"></script>
    <script>
      const API_BASE_URL = "http://127.0.0.1:5050/api";

      // Função para carregar aulas — deixada limpa para conectar depois
      async function loadLessons() {
        const list = document.getElementById("lessonList");
        list.innerHTML = `
          <p style="text-align: center; color: gray;">Carregando materiais...</p>
        `;

        try {
          // Quando implementar o endpoint, substituir a chamada abaixo:
          // const res = await fetch(`${API_BASE_URL}/materiais`);
          // const data = await res.json();
          // if (data.success && data.materiais.length > 0) { ... }

          // Por enquanto, apenas mensagem padrão:
          setTimeout(() => {
            list.innerHTML = `
              <p style="text-align: center; color: gray;">
                Nenhum material disponível no momento.
              </p>`;
          }, 500);
        } catch (err) {
          console.error("Erro ao carregar materiais:", err);
          list.innerHTML = `
            <p style="text-align: center; color: red;">
              Erro ao conectar com o servidor.
            </p>`;
        }
      }

      function viewMaterial(url) {
        if (!url) return alert("Material indisponível.");
        window.open(url, "_blank");
      }

      document.addEventListener("DOMContentLoaded", loadLessons);
    </script>
  </body>
</html>
